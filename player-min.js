//minified version of player.js - v. 1.0.6
//see important notes in player.js and about.html
function bPlayer(numOfSlides,imagePrefix,imageSuffix,caption){var me=this;this.aboutPageURL='about.html';this.okToDeploy=null;if(numOfSlides){this.slides=numOfSlides;}else{this.okToDeploy=false;}if(imagePrefix){this.imagePrefix=imagePrefix;}else{this.imagePrefix='';}if(imageSuffix){this.imageSuffix=imageSuffix;}else{this.imageSuffix='';}if(caption){this.caption=caption;}else{this.caption='';}this.resetVars=function(){me.currentSlide=1;me.rootNode=document.createElement('div');me.rootNode.className='playerContainer';me.oldNode=undefined;me.isDeployed=false;me.speed=1000;me.direction=1;me.intervalId=false;};this.animateOpenClose=function(){if(me.direction>0){var newHeight=parseInt(me.rootNode.offsetHeight,10)+30;var newWidth=parseInt(me.rootNode.offsetWidth,10)+34.8;if(newHeight<450){me.rootNode.style.height=newHeight+'px';me.rootNode.style.width=Math.round(newWidth)+'px';}else if(newHeight>=450){clearInterval(me.intervalId);me.intervalId=false;me.rootNode.style.height=450+'px';me.rootNode.style.width=522+'px';me.dumpContents();}}else{var newHeight=parseInt(me.rootNode.offsetHeight,10)-30;var newWidth=parseInt(me.rootNode.offsetWidth,10)-34.8;if(newHeight>0){me.rootNode.style.height=newHeight+'px';me.rootNode.style.width=Math.abs(Math.round(newWidth))+'px';}else if(newHeight<=0){clearInterval(me.intervalId);me.intervalId=false;me.rootNode.style.height=0+'px';me.rootNode.style.width=0+'px';me.restoreOldNode();}}};this.restoreOldNode=function(){if(me.rootNode){me.rootNode.parentNode.replaceChild(this.oldNode,this.rootNode);}me.isDeployed=false;me.resetVars();return false;};this.unDeploy=function(e,animate){if(animate!==false){animate=true;}me.halt();me.getMy('Close').onclick=null;me.getMy('GoFirst').onclick=null;me.getMy('GoBack').onclick=null;me.getMy('GoForward').onclick=null;me.getMy('GoLast').onclick=null;me.getMy('PlayPause').onclick=null;me.getMy('SpeedSelect').onchange=null;me.getMy('DirectionSelect').onchange=null;me.getMy('TotalBar').onmousedown=null;me.rootNode.innerHTML='';if(animate){me.direction=-1;me.intervalId=setInterval(me.animateOpenClose,8);}else{me.restoreOldNode();}return false;};this.dumpContents=function(){me.rootNode.innerHTML='<div class="playerControls"><div class="playerMainControls"><a class="playerPlayPause" href="#" onclick="return false;" onmouseup="this.blur()">Play</a><a class="playerClose" title="Close this player" href="#" onclick="return false;" onmouseup="this.blur();">Close</a><div class="playerSpeedControls">Speed:<select class="playerSpeedSelect"><option value="2000">Very Slow</option><option value="1500">Slow</option><option value="1000" selected="true">Medium</option><option value="500">Fast</option><option value="200">Very Fast</option></select></div><div class="playerDirectionControls">Direction:<select class="playerDirectionSelect"><option value="1" selected="true">Forward</option><option value="-1">Reverse</option></select></div></div><div class="playerFrameBar"><a class="playerGoFirst" title="Go to the beginning" href="#" onclick="return false;" onmouseup="this.blur();"></a><a class="playerGoBack" title="Go back one frame" href="#" onclick="return false;" onmouseup="this.blur();"></a><div class="playerTotalBar"><div class="playerElapsedSlides">'+me.currentSlide+'</div><span class="playerElapsedBar"></span><div class="playerTotalSlides">'+me.slides+'</div></div><a class="playerGoForward" title="Go forward one frame" href="#" onclick="return false;"onmouseup="this.blur();"></a><a class="playerGoLast" title="Go to the end" href="#" onclick="return false;"onmouseup="this.blur();"></a></div></div><div class="playerFrame"><img class="playerImage" alt="Animation Frame" src="'+me.getImageName()+'" /></div><div class="playerFooter">'+me.caption+'<a class="playerAboutLink" href="'+me.aboutPageURL+'" onclick="window.open(\''+me.aboutPageURL+'\'); return false;">About this player</a></div>';me.getMy('Close').onclick=this.unDeploy;me.getMy('GoFirst').onclick=this.goToBeginning;me.getMy('GoBack').onclick=this.stepBack;me.getMy('GoForward').onclick=this.stepForward;me.getMy('GoLast').onclick=this.goToEnd;me.getMy('PlayPause').onclick=this.play;me.getMy('SpeedSelect').onchange=this.setSpeedFromMenu;me.getMy('DirectionSelect').onchange=this.setDirectionFromMenu;me.getMy('TotalBar').onmousedown=this.handleBarDown;me.drawFrame();};this.play=function(){me.halt();if(me.direction>0){if(me.currentSlide===me.slides){me.goToBeginning();}me.intervalId=setInterval(me.stepForward,me.speed);}else if(me.direction<0){if(me.currentSlide===1){me.goToEnd();}me.intervalId=setInterval(me.stepBack,me.speed);}me.getMy('PlayPause').onclick=me.halt;me.getMy('PlayPause').innerHTML='Pause';me.getMy('PlayPause').style.backgroundPosition='-79px -64px';return false;};this.halt=function(){clearInterval(me.intervalId);me.intervalId=false;me.getMy('PlayPause').onclick=me.play;me.getMy('PlayPause').innerHTML='Play';me.getMy('PlayPause').style.backgroundPosition='-79px -32px';return false;};this.goToBeginning=function(){me.currentSlide=1;me.drawFrame();return false;};this.goToEnd=function(){me.currentSlide=me.slides;me.drawFrame();return false;};this.goTo=function(which){if(which<=me.slides&&which>=1){me.currentSlide=which;}else if(which<1){me.goToBeginning();}else if(which>me.slides){me.goToEnd();}me.drawFrame();return false;};this.stepForward=function(){var newSlide=me.currentSlide+1;if(newSlide<=me.slides){me.currentSlide=newSlide;me.drawFrame();}else{me.halt();}return false;};this.stepBack=function(){var newSlide=me.currentSlide-1;if(newSlide>=1){me.currentSlide=newSlide;me.drawFrame();}else{me.halt();}return false;};this.setSpeed=function(newspeed){if(me.intervalId){me.halt();me.speed=newspeed;me.play();}else{me.speed=newspeed;}};this.setSpeedFromMenu=function(){me.setSpeed(me.getMy('SpeedSelect').value);};this.setDirectionFromMenu=function(){if(me.intervalId){me.halt();me.direction=me.getMy('DirectionSelect').value;me.play();}else{me.direction=me.getMy('DirectionSelect').value;}};this.handleBarDrag=function(e){if(!e){var e=window.event;}var mousex=0;if(e.pageX){mousex=e.pageX;}else if(e.clientX){mousex=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;}var totalBarXPos=0;var totalBar=me.getMy('TotalBar');do{totalBarXPos+=totalBar.offsetLeft;}while(totalBar=totalBar.offsetParent);var newWidth=mousex-totalBarXPos;if(newWidth>me.getMy('TotalBar').offsetWidth){newWidth=me.getMy('TotalBar').offsetWidth;}else if(newWidth<0){newWidth=0;}me.goTo(Math.round((newWidth/me.getMy('TotalBar').offsetWidth)*me.slides));me.getMy('ElapsedBar').style.width=newWidth+'px';return false;};this.handleBarDown=function(e){if(!e){var e=window.event;}var rightclick;if(e.which){rightclick=(e.which===3);}else if(e.button){rightclick=(e.button===2);}if(!rightclick){document.onmousemove=me.handleBarDrag;document.onmouseup=me.handleBarUp;me.handleBarDrag(e);}return false;};this.handleBarUp=function(e){document.onmousemove=null;document.onmouseup=null;return false;};this.drawFrame=function(){if(me.currentSlide<=me.slides&&me.currentSlide>=1){me.getMy('Image').src=me.getImageName();me.getMy('ElapsedSlides').innerHTML=me.currentSlide;me.getMy('ElapsedBar').style.width=(Math.round(((me.currentSlide-1)/(me.slides-1))*me.getMy('TotalBar').offsetWidth)).toString()+'px';}};this.getImageName=function(which){if(!which){which=me.currentSlide;}var current=which.toString().split("");var totalLength=me.slides.toString().length;while(current.length<totalLength){current.unshift('0');}return me.imagePrefix+current.join("")+me.imageSuffix;};this.getMy=function(classname){if(!me.rootNode){return false;}classname='player'+classname;if(me.rootNode.getElementsByClassName){return me.rootNode.getElementsByClassName(classname)[0];}else{var els=me.rootNode.getElementsByTagName('*');var elsLen=els.length;var pattern=new RegExp("(^|\\s)"+classname+"(\\s|$)");for(var i=0;i<elsLen;i++){if(pattern.test(els[i].className)){return els[i];}}return false;}};this.deploy=function(where){if(me.isDeployed){me.unDeploy(null,false);}if(!me.okToDeploy){return true;}me.oldNode=where.parentNode.replaceChild(me.rootNode,where);try{me.rootNode.innerHTML='<div></div>';me.direction=1;me.intervalId=setInterval(me.animateOpenClose,8);me.isDeployed=true;var preloads=[];for(var i=1;i<me.slides;i++){preloads[i]=new Image();preloads[i].src=me.getImageName(i);}return false;}catch(ex){me.restoreOldNode();me.okToDeploy=false;return true;}};this.resetVars();if(this.okToDeploy!==false&&document.getElementById){this.okToDeploy=true;}}